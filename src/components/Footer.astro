---
import { siteMetadata } from '@lib/config';
import SocialLink from './SocialLink.astro';
import NewsletterForm from './NewsletterForm';

type Item = {
  name: string;
  href: string;
  isAvailable?: boolean;
  icon?: string;
};

const { pages } = siteMetadata;

const navigation: Record<string, Item[]> = {
  general: [
    { name: 'Home', href: pages.home },
    { name: 'About', href: pages.about },
    { name: 'Blogs', href: pages.blogs },
    { name: 'Projects', href: pages.projects },
    { name: 'Snippets', href: pages.snippets },
  ],
  extra: [
    { name: 'Newsletter', href: pages.newsletter },
    { name: 'Uses', href: pages.uses },
    { name: 'Resume', href: pages.resume },
    { name: 'Tweets', href: pages.tweets },
    { name: 'Tags', href: pages.tags },
    { name: 'Privacy Policy', href: pages.privacyPolicy },
  ],
};

const today = new Date();
const from_url = Astro.url.toString();
---

<div class='w-full pt-16 pb-8 px-4 sm:px-12'>
  <footer class='relative z-50 mx-auto max-w-5xl'>
    <div
      class='flex flex-col md:flex-row gap-4 justify-between items-start w-full border-t border-zinc-100 pb-16 pt-10 dark:border-zinc-700/40'
    >
      <div
        class='flex flex-1 flex-row gap-20 sm:px-4 lg:px-8 md:gap-48 justify-start'
      >
        <div>
          <h3 class='text-sm font-semibold tracking-wider uppercase'>
            General
          </h3>
          <ul class='mt-4 space-y-2'>
            {
              navigation.general.map((item) => {
                if (item.isAvailable === false) {
                  return (
                    <li class='block text-base text-zinc-600 no-underline dark:text-zinc-200 opacity-50 cursor-not-allowed'>
                      {item.name}
                    </li>
                  );
                }

                return (
                  <li>
                    <a
                      href={item.href}
                      class='block text-base text-primary-700 dark:text-primary-500 hover:text-primary-900 dark:hover:text-primary-300 no-underline hover:underline'
                    >
                      {item.name}
                    </a>
                  </li>
                );
              })
            }
          </ul>
        </div>
        <div>
          <h3 class='text-sm font-semibold tracking-wider uppercase'>Extras</h3>
          <ul class='mt-4 space-y-2'>
            {
              navigation.extra.map((item) => {
                if (item.isAvailable === false) {
                  return (
                    <li class='block text-base text-zinc-600 no-underline dark:text-zinc-200 opacity-50 cursor-not-allowed'>
                      {item.name}
                    </li>
                  );
                }

                return (
                  <li>
                    <a
                      href={item.href}
                      class='block text-base text-primary-700 dark:text-primary-500 hover:text-primary-900 dark:hover:text-primary-300 no-underline hover:underline'
                    >
                      {item.name}
                    </a>
                  </li>
                );
              })
            }
          </ul>
        </div>
      </div>
      <div class='mt-8 md:mt-0 flex-1 flex justify-end'>
        <NewsletterForm from_url={from_url} client:visible />
      </div>
    </div>
    <div
      class='flex flex-col gap-4 md:flex-row items-center justify-between mt-12'
    >
      <ul role='list' class='flex items-center md:order-2 order-1 space-x-2'>
        <SocialLink href={siteMetadata.github} type='github' />
        <SocialLink href={siteMetadata.twitter} type='twitter' />
        <SocialLink href={siteMetadata.linkedin} type='linkedin' />
        <SocialLink href={siteMetadata.instagram} type='instagram' />
        <SocialLink href={`mailto:${siteMetadata.email}`} type='email' />
      </ul>
      <p class='md:order-1 order-2 text-base'>
        &copy; {today.getFullYear()}{' '}
        {siteMetadata.author}
      </p>
    </div>
  </footer>
</div>
